---
title: "R for Geospatial Data Science"
subtitle: "Victoria GeoGeeks Meetup"
author: "Andy Teucher"
date: "2018/01/30"
output:
  xaringan::moon_reader:
    css: ["default", "css/my-theme.css"]
    chakra: libs/remark-latest.min.js
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(warning = FALSE, 
                      message = FALSE, 
                      cache = TRUE)
```


# Data Science
.center[![](img/data-science-cycle.png)]

.footnote[Wickham and Grolemund: [R for Data Science](http://r4ds.had.co.nz/)]

---

### .center[Geographic Information Systems (GIS)</br>vs</br>Geographic Data Science (GDS)<sup>1</sup>]

.middle[
```{r echo=FALSE}
library(readr)
tbl_11.1 <- read_csv('Attribute,GIS,GDS
Home disciplines,Geography,"Geography, Computing, Statistics"
Software focus,Graphical User Interface,Code
Reproduciblility,Minimal,Maximal')

knitr::kable(tbl_11.1, format = "html")
```
]

.footnote[
[1] Geocomputation with R, [Table 1.1](https://geocompr.robinlovelace.net/intro.html#tab:gdsl)
]

---

```{r}
library(leaflet)
leaflet() %>%
  addProviderTiles("Stamen.TonerLite") %>% 
  addAwesomeMarkers(lng = -123.369407, lat = 48.428881, 
                    label = paste0("<h3>You are Here", emo::ji("beer"), "</h3>"), 
                    labelOptions = labelOptions(noHide = TRUE))
```

---
background-image: url(img/vic-open-data.png)
---

```{r}
library(sf)
library(mapview)

dogs <- read_sf("data/dogs/DogsByNeighbourhood.shp")

mapview(dogs)
```

---

```{r}
library(ggplot2)

ggplot() + 
  geom_sf(data = dogs, aes(fill = DogLicence)) + 
  scale_fill_viridis_c() + theme_minimal()
```

---

```{r}
hydrants <- read_sf("data/hydrants/Hydrants.shp")

ggplot() + 
  geom_sf(data = hydrants, colour = "black") + 
  theme_minimal()
```

---

```{r}
hydrants <- st_intersection(hydrants, st_geometry(dogs))

ggplot() + 
  geom_sf(data = dogs, aes(fill = DogLicence)) + 
  geom_sf(data = hydrants, colour = "white") + 
  scale_fill_viridis_c() + theme_minimal()
```

---

```{r}
library(dplyr)
dogs_and_hydrants <- st_join(dogs, hydrants) %>% 
  group_by(Neighbourh) %>% 
  summarize(licences = max(DogLicence), 
            n_hydrants = length(unique(ID)), 
            hydrants_per_dog = n_hydrants / licences)
```

---

```{r}
ggplot() + 
  geom_sf(data = dogs_and_hydrants, aes(fill = hydrants_per_dog)) + 
  scale_fill_viridis_c() + theme_minimal()
```

---

???

Image credit: [Wikimedia Commons](https://commons.wikimedia.org/wiki/File:Sharingan_triple.svg)
